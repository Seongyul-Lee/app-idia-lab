## 4단계: PRD 정합성 판별

대상 아이디어: $ARGUMENTS

## 목적
작성된 PRD를 사업성·리스크·기술·문서 품질 관점에서 다각도 검증한다.

## 입력
- `ideas/NNN-아이디어명-prd.md` — PRD 문서
- `ideas/NNN-아이디어명.md` — 평가 완료 아이디어 문서
- `research/competitors/NNN-경쟁분석.md` — 2단계 경쟁사 분석
- `research/market-data/NNN-시장분석.md` — 2단계 시장 분석

## 검증 프레임워크
비판적 리뷰어 관점을 최우선으로 채택한다. 통과 근거를 찾기보다 결함 발견에 집중하라. PRD가 "왜 실패할 수 있는지"를 먼저 탐색한 뒤, 그럼에도 통과하는 항목만 통과로 판정한다.

PRD와 2단계 산출물을 모두 읽은 뒤, 아래 4개 영역을 직접 검증한다. 각 영역에 **통과/미달** 판정과 근거를 기술한다. 발견된 미달 사항은 심각도를 분류한다: **Critical**(구조적 결함, 반드시 수정), **Major**(품질 저하, 수정 권장), **Minor**(개선 사항).

### A. 사업성 검증
- PRD의 시장 규모·경쟁분석이 2단계 산출물과 일치하는가
- 차별점이 방어 가능한가
- 수익 모델이 구체적이고 현실적인가
- TAM/SAM/SOM 수치가 논리적 근거를 갖추었는가

### B. 리스크 검증
- 핵심 리스크(사업·기술·법률·운영)가 식별되고 대응 방안이 있는가
- 외부 API·플랫폼 의존성 리스크가 관리 가능한가

### C. 기술 검증
- Expo + React Native + TypeScript + Supabase로 명세된 기능이 구현 가능한가
- PRD의 기술 선택이 project-init 고정 기술 스택(Expo Router, Zustand, MMKV, op-sqlite 등)을 준수하는가
- Windows 11 + EAS Build 환경에서 개발·테스트·빌드가 가능한가 (macOS 필수 도구·iOS 전용 API 과의존 여부)
- 1인 개발 규모에 과도한 복잡성은 없는가
- 3개월 MVP 범위가 현실적인가
- DB 스키마·API 설계가 요구사항과 정합한가
- 핵심 기능의 장애 시나리오(네트워크 오류, 서버 다운 등)와 사용자 경험 대응이 명세되었는가
- **오프라인 우선 설계가 구체적인가** (로컬 저장소 선택, 동기화 큐 로직, 충돌 해결 정책, 저장소별 역할 분담이 명시되었는가)
- **핵심 DB Function의 SQL 본문이 완성되었는가** (시그니처만 있는 스텁이 아닌지)
- **핵심 API의 TypeScript 인터페이스(요청/응답)가 작성되었는가**
- **상태 관리 구조(Zustand Store 목록 및 역할)가 정의되었는가**

### D. 문서 품질 검증
- 목표·기능·기술 명세 간 모순이 없는가
- 누락된 핵심 섹션이 없는가 (16개 섹션 전체 존재 여부)
- KPI가 구체적이고 측정 가능한가
- **모든 P0 기능 요구사항에 번호 형식(AC-XX-X)의 수용 기준이 존재하고, 검증 가능한 조건문 형태인가**
- **User Story가 온보딩·인증·핵심 기능·설정·결제 등 모든 기능 영역을 커버하는가 (최소 15개)**
- **Screen Map(네비게이션 구조 트리)과 핵심 화면별 UI 구성 설명이 존재하는가**
- **기능-테이블-API 매핑표가 존재하고, 모든 P0 기능이 매핑되었는가**

## 미달 유형 분류
미달 사항을 아래 두 유형으로 구분한다:
- **아이디어 결함**: 시장 규모 부족, 차별점 부재, 수익 모델 비현실 등 아이디어 자체의 구조적 문제. PRD 문서 수정으로 해결 불가.
- **문서 결함**: PRD 기술 내용의 누락·모순·부족. 아이디어는 유효하나 문서 보완이 필요.

## 산출물
| 파일 | 위치 |
|------|------|
| 판별 보고서 | `ideas/NNN-아이디어명-review.md` |

### 리뷰 보고서 필수 구성
1. **영역별 판정**: A~D 각 영역의 통과/미달 판정 및 근거
2. **미달 목록**: 각 미달 사항의 심각도(Critical/Major/Minor)와 유형(아이디어 결함/문서 결함)
3. **수정 지침** (문서 결함으로 3단계 회귀 시 필수):
   - 수정 대상: PRD의 어떤 섹션을 수정해야 하는지
   - 결함 내용: 해당 섹션의 구체적 문제점
   - 수정 방향: 어떻게 수정해야 하는지 구체적 지침
4. **최종 판정**: 아래 전환 기준에 따른 판정 결과

## 전환
| 조건 | 판정 |
|------|------|
| Critical/Major 없음 | **통과** |
| Critical/Major가 모두 문서 결함 | **3단계 회귀** (수정 지침 첨부) |
| Critical/Major에 아이디어 결함 포함 (수정 가능) | **2단계 회귀** |
| 아이디어 결함이 근본적·수정 불가 | **탈락** |

## 판정별 사용자 선택

### 판정이 "통과"인 경우
사용자에게 아래 선택지를 제시한다:
1. **채택**
2. **3단계 회귀**
3. **2단계 회귀**
4. **보류**
5. **탈락**

### 판정이 "3단계 회귀"인 경우
리뷰 보고서의 수정 지침을 사용자에게 제시한 뒤 선택지를 제공한다:
1. **3단계 회귀** → `/stage-3 NNN-아이디어명` 안내
2. **직접 작성** — 사용자가 원하는 처리를 직접 입력 (예: "기술 스택 요건 충족하지 않으니 탈락 처리 해줘")

### 판정이 "2단계 회귀"인 경우
근본적 사업성/기술 전제 변경이 필요함을 안내한 뒤 선택지를 제공한다:
1. **2단계 회귀** → `/stage-2 NNN-아이디어명` 안내
2. **직접 작성** — 사용자가 원하는 처리를 직접 입력 (예: "보류 처리 해줘")

### 판정이 "탈락"인 경우
사용자에게 아래 선택지를 제시한다:
1. **탈락**
2. **보류**

사용자가 **채택**, **탈락**, **보류** 중 하나를 선택했다면 아래 해당 섹션을 수행한다.

---

## 판정 결과 처리

### 채택
1. 아이디어 문서 판정란에 `채택` 기록
2. 관련 파일(`NNN-아이디어명.md`, `-prd.md`, `-review.md`)을 `ideas/adopted/`로 **이동** (원본 삭제)

### 탈락
1. **반드시 사용자의 명시적 동의** 확인
2. 아이디어 문서 판정란에 `탈락` 기록 — 탈락 단계·미달 항목·사유를 판정란에 직접 작성 (별도 rejection 파일 생성하지 않음)
3. 관련 파일(`NNN-아이디어명.md`, 기존 `-prd.md`/`-review.md` 등)을 `ideas/rejected/`로 **이동** (원본 삭제)

### 보류
- `ideas/` 루트에 유지, 판정란에 `보류` 기록 및 미달 항목·추가 조사 방향 명시
- 재개 시 `/stage-2 NNN-아이디어명`부터 재시작
